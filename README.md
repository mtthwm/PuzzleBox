# About

## Description
This is a project built for our ECE 5780 (Embedded Systems) final project. We built a puzzle box that requires the user to interact with it in novel ways to unlock and reveal the prize inside. 

### Puzzle 1: Knock and Response 

The buzzer plays a common knock rhythm, and the user must respond to finish the rhythm. 

### Puzzle 2:  

Led on sides of the box lights up, rotate the whole box so the LED points down. Repeat 3 times with a random side each time. 

### Puzzle 3: 

Using multiple photoresistors, a sequence of holes needs to either be lit or covered.  

### Puzzle Completion: 

Using a servo, unlock the box for opening. Puzzle restarts on close. 

## Collaborators
- Matthew Morales
- Daniel Reyna
- Casey Wolfe
- Griffin Rodgers

# Project Setup Instructions

## Assembly
1. Print the box and lid. Our original design was slightly off, which required us to drill into the box to make room for the servo locking mechanism.
2. Glue LEDs and photoresistors into the holes in the side. Each LED has a 220 Ohm resistor in series, and each photoresistor is part of a voltage divider with a 10k Ohm resistor. Make sure to match up the LEDs which correspond to the photoresistors.
3. Attach the piezo resistor to the underside of the lid using hot glue. This seems to cushion the vibrations picked up by the piezo resistor enough to avoid large voltage spikes. As a result, we didn't connect it to a voltage divider.
4. Once the piezo sensor is attached, you may need to use usart to display the values in order to pick a proper voltage threshold for the piezo sensor. It seemed the voltage generated by these sensors varied significantly
5. Open the project in Keil uVision, compile the project, and flash it to your STM32F0 Discovery Kit Board.

## Pins
- I2C:  
  - SCL: B10 
  - SDA: B11 

- UART (debug):  
  - TX: PC10 
  - RX: PC11 

- ADC: PC0-3
  - Piezo: PC0 
  - Photoresistors PC1,2,3

- Buzzer: PB5 

- Box-Side LEDs 
   - PA8 -- Top LED 
   - PA9 – Base LED 
   - PA10 – Front LED 
   - PA11 – Back LED 
   - PA12 – Left Side LED
   - PA15 – Right Side LED	 

- Servo: PB3 
